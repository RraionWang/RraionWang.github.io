# ESP-IDF 基础


## 基础工程目录解释

1. DRAM（数据RAM）
描述：非常量静态数据（如 .data 段）和零初始化数据（如 .bss 段，通常是数值为0的全局变量）。
存储位置：由链接器默认放入内部SRAM作为数据存储，也可以配置放入外部RAM。

2. "noinit" DRAM
描述：未初始化的全局变量数据。
存储位置：同样由链接器放入内部SRAM作为数据存储，也可配置放入外部RAM。

3. IRAM（指令RAM）
描述：ESP-IDF将内部SRAM0的部分区域（SRAM0 和 SRAM1）分配为指令RAM，用于存放中断处理程序等代码。
特殊功能：可以通过使用 IRAM_ATTR 宏在源代码中指定需要放入IRAM的代码。

4. IROM（代码从flash中运行）
描述：如果一个函数没有被显式地声明放在IRAM或者RTC存储器中，则它会放在flash中执行。

5. DROM（数据存储在flash中）
描述：用于存放只读数据。

6. RTC Slow memory（RTC慢速存储器）
描述：通过 RTC_NOINIT_ATTR 属性宏可以用来将数据放入RTC Slow memory。
特性：放入此类型存储器的值在深度睡眠模式中醒来后会保持不变。

7. RTC FAST memory（RTC快速存储器）
描述：同一区域既可以作为指令存储器也可以作为数据存储器进行访问。
特性：从深度睡眠模式唤醒后必须要运行的代码要放在RTC存储器中

## 启动流程
1. 一级引导程序：该程序固化在ROM中，不可修改。其主要任务是加载二级引导程序至RAM中运行，并检查IO0引脚的状态以选择程序模式。如果芯片上电时检测到IO0引脚为低电平，则会进入下载模式；否则，将继续执行二级引导程序。
2. 二级引导程序（bootloader程序）：从内存地址0x8000处读取分区表，处理各种段，并加载应用程序。这一阶段确保了系统能够正确识别和加载所需的程序部分。
3. 应用程序：首先进行硬件外设和基本C语言运行环境的初始化，接着初始化FreeRTOS操作系统。完成这些初始化步骤后，最终执行app_main()函数，开始应用程序的主要逻辑和功能。